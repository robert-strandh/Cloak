\chapter{Mask}

\Defprotoclass {mask}

A mask is a supplier of \emph{opacity} values.  For each pixel in the
plane, a mask object is capable of supplying an opacity value.
Different subclasses of this class have different representation.

\Defclass {matrix-mask}

A mask of this type contains explicit storage for each opacity value
inside a rectangular subset of the plane.  For pixels outside that
rectangular subset, this mask type supplies an opacity value of 0d0,
i.e., totally transparent.

\Defclass {computed-mask}

A mask of this type contains a function that, when applied to a
horizontal and a vertical position, returns an opacity value.

\Defclass {triangle-mask}

A mask of this type contains a set of triangles, defined by their
corner coordinates.

\Definitarg {:triangles}

This initarg is used to supply a list of triangles (see below) that
will define the mask.

\Defclass {triangle}

This class is not itself a mask type.  An instance of this class just
contains three points in the plane.  A set (represented as a list) of
such instances is used to create a triangle mask.  The order of the
coordinates for the triangle corners in a triangle is not important.

\Definitarg {:x1}
\Definitarg {:y1}
\Definitarg {:x2}
\Definitarg {:y2}
\Definitarg {:x3}
\Definitarg {:y3}

These initargs are accepted by all subclasses of the class
\texttt{triangle}.
